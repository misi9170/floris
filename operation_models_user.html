
<!DOCTYPE html>


<html lang="python" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Turbine Operation Models &#8212; FLORIS</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="_static/documentation_options.js?v=30a733bc"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=36754332"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-L8RGXZCW3F"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-L8RGXZCW3F');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-L8RGXZCW3F');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'operation_models_user';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Main Input File Reference" href="input_reference_main.html" />
    <link rel="prev" title="Turbine Library Interface" href="turbine_interaction.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="python"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/gch.gif" class="logo__image only-light" alt="FLORIS - Home"/>
    <script>document.write(`<img src="_static/gch.gif" class="logo__image only-dark" alt="FLORIS - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    FLORIS Wake Modeling & Wind Farm Controls
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="v3_to_v4.html">Switching from FLORIS v3 to v4</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">User Reference</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="intro_concepts.html">Introductory Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_concepts.html">Advanced Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="wind_data_user.html">Wind Data Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="floating_wind_turbine.html">Floating Wind Turbine Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="turbine_interaction.html">Turbine Library Interface</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Turbine Operation Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_reference_main.html">Main Input File Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_reference_turbine.html">Turbine Input File Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples Index</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Theory and Background</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="wake_models.html">Wake Models</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="empirical_gauss_model.html">Empirical Gaussian model</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Developer Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dev_guide.html">Developer's Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture and Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_quality.html">Code Quality</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api_docs.html">API Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.flow_visualization.html">floris.flow_visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.floris_model.html">floris.floris_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.wind_data.html">floris.wind_data</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.uncertain_floris_model.html">floris.uncertain_floris_model</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/floris.turbine_library.html">floris.turbine_library</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.turbine_library.turbine_previewer.html">floris.turbine_library.turbine_previewer</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.turbine_library.turbine_utilities.html">floris.turbine_library.turbine_utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.parallel_floris_model.html">floris.parallel_floris_model</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/floris.optimization.html">floris.optimization</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.html">floris.optimization.layout_optimization</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_base.html">floris.optimization.layout_optimization.layout_optimization_base</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_boundary_grid.html">floris.optimization.layout_optimization.layout_optimization_boundary_grid</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_pyoptsparse.html">floris.optimization.layout_optimization.layout_optimization_pyoptsparse</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_pyoptsparse_spread.html">floris.optimization.layout_optimization.layout_optimization_pyoptsparse_spread</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_scipy.html">floris.optimization.layout_optimization.layout_optimization_scipy</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.optimization.other.html">floris.optimization.other</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.other.boundary_grid.html">floris.optimization.other.boundary_grid</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.html">floris.optimization.yaw_optimization</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimization_base.html">floris.optimization.yaw_optimization.yaw_optimization_base</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimization_tools.html">floris.optimization.yaw_optimization.yaw_optimization_tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimizer_geometric.html">floris.optimization.yaw_optimization.yaw_optimizer_geometric</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimizer_scipy.html">floris.optimization.yaw_optimization.yaw_optimizer_scipy</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimizer_sr.html">floris.optimization.yaw_optimization.yaw_optimizer_sr</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.layout_visualization.html">floris.layout_visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.cut_plane.html">floris.cut_plane</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.core.html">floris.core</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.convert_turbine_v3_to_v4.html">floris.convert_turbine_v3_to_v4</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.convert_floris_input_v3_to_v4.html">floris.convert_floris_input_v3_to_v4</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.utilities.html">floris.utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.type_dec.html">floris.type_dec</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.logging_manager.html">floris.logging_manager</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/001_opening_floris_computing_power.html">Example 1: Opening FLORIS and Computing Power</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/002_visualizations.html">Example 2: Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/003_wind_data_objects.html">Example 3: Wind Data Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/004_set.html">Example 4: Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/005_getting_power.html">Example 5: Getting Turbine and Farm Power</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/006_get_farm_aep.html">Example 6: Getting Expected Power and AEP</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/007_sweeping_variables.html">Example 7: Sweeping Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/008_uncertain_models.html">Example 8: Uncertain Models</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="examples/009_compare_farm_power_with_neighbor.html">Example 9: Compare farm power with neighboring farm</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="examples/examples_wind_data/001_wind_data_comparisons.html">Example: Wind Data Comparisons</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/examples_wind_data/002_generate_ti.html">Example: Generate TI</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/examples_wind_data/003_generate_value.html">Example: Generate value</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/NREL/floris" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NREL/floris/edit/main/docs/operation_models_user.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NREL/floris/issues/new?title=Issue%20on%20page%20%2Foperation_models_user.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/operation_models_user.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Turbine Operation Models</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-the-operation-model">Selecting the operation model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#operation-model-library">Operation model library</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-model">Simple model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cosine-loss-model">Cosine loss model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-derating-model">Simple derating model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mixed-operation-model">Mixed operation model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#awc-model">AWC model</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="turbine-operation-models">
<h1>Turbine Operation Models<a class="headerlink" href="#turbine-operation-models" title="Link to this heading">#</a></h1>
<p>Separate from the turbine models, which define the physical characterstics of the turbines, FLORIS
allows users to specify how the turbine behaves in terms of producing power and thurst. We refer to
different models for turbine behavior as &quot;operation models&quot;. A key feature of operation models is
the ability for users to specify control setpoints at which the operation model will be evaluated.
For instance, some operation models allow users to specify <code class="docutils literal notranslate"><span class="pre">yaw_angles</span></code>, which alter the power
being produced by the turbine along with it's thrust force on flow.</p>
<p>Operation models are specified by the <code class="docutils literal notranslate"><span class="pre">operation_model</span></code> key on the turbine yaml file, or by using
the <code class="docutils literal notranslate"><span class="pre">set_operation_model()</span></code> method on <code class="docutils literal notranslate"><span class="pre">FlorisModel</span></code>. Each operation model available in FLORIS is
described and demonstrated below. The simplest operation model is the <code class="docutils literal notranslate"><span class="pre">&quot;simple&quot;</span></code> operation model,
which takes no control setpoints and simply evaluates the power and thrust coefficient curves for
the turbine at the current wind condition. The default operation model is the <code class="docutils literal notranslate"><span class="pre">&quot;cosine-loss&quot;</span></code>
operation model, which models the loss in power of a turbine under yaw misalignment using a cosine
term with an exponent.</p>
<p>We first provide a quick demonstration of how to switch between different operation models. Then,
each operation model available in FLORIS is described, along with its relevant control setpoints.
We also describe the different parameters that must be specified in the turbine
<code class="docutils literal notranslate"><span class="pre">&quot;power_thrust_table&quot;</span></code> dictionary in order to use that operation model.</p>
<section id="selecting-the-operation-model">
<h2>Selecting the operation model<a class="headerlink" href="#selecting-the-operation-model" title="Link to this heading">#</a></h2>
<p>There are two options for selecting the operation model:</p>
<ol class="arabic simple">
<li><p>Manually changing the <code class="docutils literal notranslate"><span class="pre">&quot;operation_model&quot;</span></code> field of the turbine input yaml
(see <a class="reference internal" href="input_reference_turbine.html"><span class="doc std std-doc">Turbine Input File Reference</span></a>)</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">set_operation_model()</span></code> on an instantiated <code class="docutils literal notranslate"><span class="pre">FlorisModel</span></code> object.</p></li>
</ol>
<p>The following code demonstrates the use of the second option.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">floris</span> <span class="kn">import</span> <span class="n">FlorisModel</span>
<span class="kn">from</span> <span class="nn">floris</span> <span class="kn">import</span> <span class="n">layout_visualization</span> <span class="k">as</span> <span class="n">layoutviz</span>

<span class="n">fmodel</span> <span class="o">=</span> <span class="n">FlorisModel</span><span class="p">(</span><span class="s2">&quot;../examples/inputs/gch.yaml&quot;</span><span class="p">)</span>

<span class="c1"># Look at layout</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">layoutviz</span><span class="o">.</span><span class="n">plot_turbine_rotors</span><span class="p">(</span><span class="n">fmodel</span><span class="p">)</span>
<span class="n">layoutviz</span><span class="o">.</span><span class="n">plot_turbine_labels</span><span class="p">(</span><span class="n">fmodel</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;x [m]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;y [m]&quot;</span><span class="p">)</span>

<span class="c1"># Set simple operation model</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;simple&quot;</span><span class="p">)</span>

<span class="c1"># Evalaute the model and extract the power output</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;simple operation model powers [kW]: &quot;</span><span class="p">,</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Set the yaw angles (which the &quot;simple&quot; operation model does not use</span>
<span class="c1"># and change the operation model to &quot;cosine-loss&quot;</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">yaw_angles</span><span class="o">=</span><span class="p">[[</span><span class="mf">20.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]])</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;cosine-loss&quot;</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">layoutviz</span><span class="o">.</span><span class="n">plot_turbine_rotors</span><span class="p">(</span><span class="n">fmodel</span><span class="p">)</span>
<span class="n">layoutviz</span><span class="o">.</span><span class="n">plot_turbine_labels</span><span class="p">(</span><span class="n">fmodel</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;x [m]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;y [m]&quot;</span><span class="p">)</span>

<span class="c1"># Evaluate again</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">powers_cosine_loss</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;cosine-loss operation model powers [kW]: &quot;</span><span class="p">,</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>simple operation model powers [kW]:  [[1753.95445918  436.4427005   506.66815478]]
cosine-loss operation model powers [kW]:  [[1561.31837381  778.04338242  651.77709894]]
</pre></div>
</div>
<img alt="_images/23634896fb924d8c8c1186e04bacbfff72ae371de5fa2195eeb1a827813743cd.png" src="_images/23634896fb924d8c8c1186e04bacbfff72ae371de5fa2195eeb1a827813743cd.png" />
<img alt="_images/887f0e2b55a73b89a84d7600e3b37d669c5d7e7220c38152584af0e614e6c453.png" src="_images/887f0e2b55a73b89a84d7600e3b37d669c5d7e7220c38152584af0e614e6c453.png" />
</div>
</div>
</section>
<section id="operation-model-library">
<h2>Operation model library<a class="headerlink" href="#operation-model-library" title="Link to this heading">#</a></h2>
<section id="simple-model">
<h3>Simple model<a class="headerlink" href="#simple-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;simple&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">SimpleTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;simple&quot;</span></code> operation model describes the &quot;normal&quot; function of a wind turbine, as described by
its power curve and thrust coefficient. It does not respond to any control setpoints, and is most
often used as a baseline or for users wanting to evaluate wind farms in nominal operation.</p>
</section>
<section id="cosine-loss-model">
<h3>Cosine loss model<a class="headerlink" href="#cosine-loss-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;cosine-loss&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">CosineLossTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_yaw</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_tilt</span></code> (scalar)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;cosine-loss&quot;</span></code> operation model describes the decrease in power and thrust produced by a
wind turbine as it yaws (or tilts) away from the incoming wind. The thrust is reduced by a factor of
<span class="math notranslate nohighlight">\(\cos \gamma\)</span>, where <span class="math notranslate nohighlight">\(\gamma\)</span> is the yaw misalignment angle, while the power is reduced by a factor
of <span class="math notranslate nohighlight">\((\cos\gamma)^{p_P}\)</span>, where <span class="math notranslate nohighlight">\(p_P\)</span> is the cosine loss exponent, specified by <code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_yaw</span></code>
(or <code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_tilt</span></code> for tilt angles). The power and thrust produced by the turbine
thus vary as a function of the turbine's yaw angle, set using the <code class="docutils literal notranslate"><span class="pre">yaw_angles</span></code> argument to
<code class="docutils literal notranslate"><span class="pre">FlorisModel.set()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">floris</span> <span class="kn">import</span> <span class="n">TimeSeries</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Set up the FlorisModel</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;cosine-loss&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">])</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mf">8.0</span><span class="p">,</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mf">270.0</span><span class="p">,</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.06</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>

<span class="c1"># Sweep the yaw angles</span>
<span class="n">yaw_angles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">yaw_angles</span><span class="o">=</span><span class="n">yaw_angles</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">powers</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">yaw_angles</span><span class="p">,</span> <span class="n">powers</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Yaw angle [deg]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Power [kW]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Power [kW]&#39;)
</pre></div>
</div>
<img alt="_images/165c42a72adb379e661c7a7944cdd8dd5c424a52d1acf17141f993999fcd380b.png" src="_images/165c42a72adb379e661c7a7944cdd8dd5c424a52d1acf17141f993999fcd380b.png" />
</div>
</div>
</section>
<section id="simple-derating-model">
<h3>Simple derating model<a class="headerlink" href="#simple-derating-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;simple-derating&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">SimpleDeratingTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;simple-derating&quot;</span></code> operation model enables users to derate turbines by setting a new power
rating. It does not require any extra parameters on the <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>, but adescribes the
decrease in power and thrust produced by providing the <code class="docutils literal notranslate"><span class="pre">power_setpoints</span></code> argument to
<code class="docutils literal notranslate"><span class="pre">FlorisModel.set()</span></code>. The default power rating for the turbine can be acheived by setting the
appropriate entries of <code class="docutils literal notranslate"><span class="pre">power_setpoints</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up the FlorisModel</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;simple-derating&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>
<span class="n">wind_speeds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">wind_speeds</span><span class="p">,</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mf">270.0</span><span class="p">,</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.06</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="k">for</span> <span class="n">power_setpoint</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]:</span>
    <span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">power_setpoints</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">power_setpoint</span><span class="o">*</span><span class="mf">1e6</span><span class="p">]]</span><span class="o">*</span><span class="mi">100</span><span class="p">))</span>
    <span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="n">powers</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">powers</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Power setpoint (MW): </span><span class="si">{</span><span class="n">power_setpoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Wind speed [m/s]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Power [kW]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/msinner/floris3/floris/core/turbine/operation_models.py:367: RuntimeWarning: divide by zero encountered in divide
  power_fractions = power_setpoints / base_powers
/Users/msinner/floris3/floris/core/wake_deflection/gauss.py:323: RuntimeWarning: invalid value encountered in divide
  val = 2 * (avg_v - v_core) / (v_top + v_bottom)
/Users/msinner/floris3/floris/core/wake_deflection/gauss.py:158: RuntimeWarning: invalid value encountered in divide
  C0 = 1 - u0 / freestream_velocity
/Users/msinner/floris3/floris/core/wake_velocity/gauss.py:80: RuntimeWarning: invalid value encountered in divide
  sigma_z0 = rotor_diameter_i * 0.5 * np.sqrt(uR / (u_initial + u0))
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Power [kW]&#39;)
</pre></div>
</div>
<img alt="_images/9facc726018877ff30b9530a9ba631cfdb7d3a64c4bc5eb2fef1017a0b0c5a37.png" src="_images/9facc726018877ff30b9530a9ba631cfdb7d3a64c4bc5eb2fef1017a0b0c5a37.png" />
</div>
</div>
</section>
<section id="mixed-operation-model">
<h3>Mixed operation model<a class="headerlink" href="#mixed-operation-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;mixed&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">MixedOperationTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_yaw</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_tilt</span></code> (scalar)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;mixed&quot;</span></code> operation model allows users to specify <em>either</em> <code class="docutils literal notranslate"><span class="pre">yaw_angles</span></code> (evaluated using the
<code class="docutils literal notranslate"><span class="pre">&quot;cosine-loss&quot;</span></code> operation model) <em>or</em> <code class="docutils literal notranslate"><span class="pre">power_setpoints</span></code> (evaluated using the <code class="docutils literal notranslate"><span class="pre">&quot;simple-derating&quot;</span></code>
operation model). That is, for each turbine, and at each <code class="docutils literal notranslate"><span class="pre">findex</span></code>, a non-zero yaw angle or a
non-<code class="docutils literal notranslate"><span class="pre">None</span></code> power setpoint may be specified. However, specifying both a non-zero yaw angle and a
finite power setpoint for the same turbine and at the same <code class="docutils literal notranslate"><span class="pre">findex</span></code> will produce an error.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;mixed&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">])</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">10.0</span><span class="p">]),</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">270.0</span><span class="p">]),</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.06</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">yaw_angles</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]]),</span>
    <span class="n">power_setpoints</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="kc">None</span><span class="p">,</span> <span class="mf">2e6</span><span class="p">]])</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Powers [kW]: &quot;</span><span class="p">,</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Powers [kW]:  [[3063.49046772 2000.        ]]
</pre></div>
</div>
</div>
</div>
</section>
<section id="awc-model">
<h3>AWC model<a class="headerlink" href="#awc-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;awc&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">AWCTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_a</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_power_b</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_power_c</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_thrust_b</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_thrust_c</span></code> (scalar)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;awc&quot;</span></code> operation model allows for users to define <em>active wake control</em> strategies. These strategies
use pitch control to actively enhance wake mixing and subsequently decrease wake velocity deficits. As a
result, downstream turbines can increase their power production, with limited power loss for the controlled
upstream turbine. The <code class="docutils literal notranslate"><span class="pre">AWCTurbine</span></code> class models this power loss at the turbine applying AWC. For each
turbine, the user can define an AWC strategy to implement through the <code class="docutils literal notranslate"><span class="pre">awc_modes</span></code> array. Note that currently,
only <code class="docutils literal notranslate"><span class="pre">&quot;baseline&quot;</span></code>, i.e., no AWC, and <code class="docutils literal notranslate"><span class="pre">&quot;helix&quot;</span></code>, i.e., the
<a class="reference external" href="https://doi.org/10.1002/we.2513">counterclockwise helix method</a> have been implemented.</p>
<p>The user then defines the exact AWC implementation through setting the variable <code class="docutils literal notranslate"><span class="pre">awc_amplitudes</span></code> for
each turbine. This variable defines the mean-to-peak amplitude of the sinusoidal AWC pitch excitation,
i.e., for a turbine that under <code class="docutils literal notranslate"><span class="pre">awc_modes</span> <span class="pre">=</span> <span class="pre">&quot;baseline&quot;</span></code> has a constant pitch angle of 0 degrees, setting
<code class="docutils literal notranslate"><span class="pre">awc_amplitude</span> <span class="pre">=</span> <span class="pre">2</span></code> results in a pitch signal varying from -2 to 2 degrees over the desired Strouhal
frequency. This Strouhal frequency is not used as an input here, since it has minimal influence on turbine
power production. Note that setting <code class="docutils literal notranslate"><span class="pre">awc_amplitudes</span> <span class="pre">=</span> <span class="pre">0</span></code> effectively disables AWC and is therefore the same
as running a turbine at <code class="docutils literal notranslate"><span class="pre">awc_modes</span> <span class="pre">=</span> <span class="pre">&quot;baseline&quot;</span></code>.</p>
<p>Each example turbine input file <code class="docutils literal notranslate"><span class="pre">floris/turbine_library/*.yaml</span></code> has its own <code class="docutils literal notranslate"><span class="pre">helix_*</span></code> parameter data. These
parameters are determined by fitting data from <code class="docutils literal notranslate"><span class="pre">OpenFAST</span></code> simulations in region II to the following equation:</p>
<div class="math notranslate nohighlight">
\[
    P_\text{AWC} = P_\text{baseline} \cdot (1 - (b + c \cdot P_\text{baseline} ) \cdot A_\text{AWC}^a)
\]</div>
<p>where <span class="math notranslate nohighlight">\(a\)</span> is <code class="docutils literal notranslate"><span class="pre">&quot;helix_a&quot;</span></code>, <span class="math notranslate nohighlight">\(b\)</span> is <code class="docutils literal notranslate"><span class="pre">&quot;helix_power_b&quot;</span></code>, <span class="math notranslate nohighlight">\(c\)</span> is <code class="docutils literal notranslate"><span class="pre">&quot;helix_power_c&quot;</span></code>, and <span class="math notranslate nohighlight">\(A_\text{AWC}\)</span> is <code class="docutils literal notranslate"><span class="pre">awc_amplitudes</span></code>.
The thrust coefficient follows the same equation, but with the respective thrust parameters. When AWC is
turned on while <span class="math notranslate nohighlight">\(P_\text{baseline} &gt; P_\text{rated}\)</span>, a warning is given as the model is not yet tuned for region III.</p>
<p>The figure below shows the fit between the turbine power and thrust in OpenFAST helix AWC simulations (x)
and FLORIS simulations (--) at different region II wind speeds for the NREL 5MW reference turbine.</p>
<img src="powerthrust_helix.png" width="600px"><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;awc&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">])</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">10.0</span><span class="p">]),</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">270.0</span><span class="p">]),</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.06</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">awc_modes</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;helix&quot;</span><span class="p">,</span> <span class="s2">&quot;baseline&quot;</span><span class="p">]),</span>
    <span class="n">awc_amplitudes</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Powers [kW]: &quot;</span><span class="p">,</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;awc&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">])</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>

<span class="nn">File ~\projects\floris\floris\floris_model.py:1306,</span> in <span class="ni">FlorisModel.set_operation_model</span><span class="nt">(self, operation_model)</span>
<span class="g g-Whitespace">   </span><span class="mi">1304</span> <span class="n">turbine_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">farm</span><span class="o">.</span><span class="n">turbine_definitions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">1305</span> <span class="n">turbine_type</span><span class="p">[</span><span class="s2">&quot;operation_model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">operation_model</span>
<span class="ne">-&gt; </span><span class="mi">1306</span> <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">turbine_type</span><span class="o">=</span><span class="p">[</span><span class="n">turbine_type</span><span class="p">])</span>

<span class="nn">File ~\projects\floris\floris\floris_model.py:347,</span> in <span class="ni">FlorisModel.set</span><span class="nt">(self, wind_speeds, wind_directions, wind_shear, wind_veer, reference_wind_height, turbulence_intensities, air_density, layout_x, layout_y, turbine_type, turbine_library_path, solver_settings, heterogenous_inflow_config, wind_data, yaw_angles, power_setpoints, disable_turbines)</span>
<span class="g g-Whitespace">    </span><span class="mi">345</span> <span class="n">_yaw_angles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">farm</span><span class="o">.</span><span class="n">yaw_angles</span>
<span class="g g-Whitespace">    </span><span class="mi">346</span> <span class="n">_power_setpoints</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">farm</span><span class="o">.</span><span class="n">power_setpoints</span>
<span class="ne">--&gt; </span><span class="mi">347</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reinitialize</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">348</span>     <span class="n">wind_speeds</span><span class="o">=</span><span class="n">wind_speeds</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">349</span>     <span class="n">wind_directions</span><span class="o">=</span><span class="n">wind_directions</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">350</span>     <span class="n">wind_shear</span><span class="o">=</span><span class="n">wind_shear</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">351</span>     <span class="n">wind_veer</span><span class="o">=</span><span class="n">wind_veer</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">352</span>     <span class="n">reference_wind_height</span><span class="o">=</span><span class="n">reference_wind_height</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">353</span>     <span class="n">turbulence_intensities</span><span class="o">=</span><span class="n">turbulence_intensities</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">354</span>     <span class="n">air_density</span><span class="o">=</span><span class="n">air_density</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">355</span>     <span class="n">layout_x</span><span class="o">=</span><span class="n">layout_x</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">356</span>     <span class="n">layout_y</span><span class="o">=</span><span class="n">layout_y</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">357</span>     <span class="n">turbine_type</span><span class="o">=</span><span class="n">turbine_type</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">358</span>     <span class="n">turbine_library_path</span><span class="o">=</span><span class="n">turbine_library_path</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">359</span>     <span class="n">solver_settings</span><span class="o">=</span><span class="n">solver_settings</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">360</span>     <span class="n">heterogenous_inflow_config</span><span class="o">=</span><span class="n">heterogenous_inflow_config</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">361</span>     <span class="n">wind_data</span><span class="o">=</span><span class="n">wind_data</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">362</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">364</span> <span class="c1"># If the yaw angles or power setpoints are not the default, set them back to the</span>
<span class="g g-Whitespace">    </span><span class="mi">365</span> <span class="c1"># previous setting</span>
<span class="g g-Whitespace">    </span><span class="mi">366</span> <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">_yaw_angles</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>

<span class="nn">File ~\projects\floris\floris\floris_model.py:230,</span> in <span class="ni">FlorisModel._reinitialize</span><span class="nt">(self, wind_speeds, wind_directions, wind_shear, wind_veer, reference_wind_height, turbulence_intensities, air_density, layout_x, layout_y, turbine_type, turbine_library_path, solver_settings, heterogenous_inflow_config, wind_data)</span>
<span class="g g-Whitespace">    </span><span class="mi">227</span> <span class="n">floris_dict</span><span class="p">[</span><span class="s2">&quot;farm&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">farm_dict</span>
<span class="g g-Whitespace">    </span><span class="mi">229</span> <span class="c1"># Create a new instance of floris and attach to self</span>
<span class="ne">--&gt; </span><span class="mi">230</span> <span class="bp">self</span><span class="o">.</span><span class="n">core</span> <span class="o">=</span> <span class="n">Core</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">floris_dict</span><span class="p">)</span>

<span class="nn">File ~\projects\floris\floris\type_dec.py:226,</span> in <span class="ni">FromDictMixin.from_dict</span><span class="nt">(cls, data)</span>
<span class="g g-Whitespace">    </span><span class="mi">221</span> <span class="k">if</span> <span class="n">undefined</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">222</span>     <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">223</span>         <span class="sa">f</span><span class="s2">&quot;The class definition for </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> &quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">224</span>         <span class="sa">f</span><span class="s2">&quot;is missing the following inputs: </span><span class="si">{</span><span class="n">undefined</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">225</span>     <span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">226</span> <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File &lt;attrs generated init floris.core.core.Core&gt;:13,</span> in <span class="ni">__init__</span><span class="nt">(self, logging, solver, wake, farm, flow_field, name, description, floris_version)</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span> <span class="n">_setattr</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="n">__attr_converter_description</span><span class="p">(</span><span class="n">description</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span> <span class="n">_setattr</span><span class="p">(</span><span class="s1">&#39;floris_version&#39;</span><span class="p">,</span> <span class="n">__attr_converter_floris_version</span><span class="p">(</span><span class="n">floris_version</span><span class="p">))</span>
<span class="ne">---&gt; </span><span class="mi">13</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attrs_post_init__</span><span class="p">()</span>

<span class="nn">File ~\projects\floris\floris\core\core.py:75,</span> in <span class="ni">Core.__attrs_post_init__</span><span class="nt">(self)</span>
<span class="g g-Whitespace">     </span><span class="mi">69</span> <span class="n">logging_manager</span><span class="o">.</span><span class="n">configure_file_log</span><span class="p">(</span>
<span class="g g-Whitespace">     </span><span class="mi">70</span>     <span class="bp">self</span><span class="o">.</span><span class="n">logging</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">][</span><span class="s2">&quot;enable&quot;</span><span class="p">],</span>
<span class="g g-Whitespace">     </span><span class="mi">71</span>     <span class="bp">self</span><span class="o">.</span><span class="n">logging</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">][</span><span class="s2">&quot;level&quot;</span><span class="p">],</span>
<span class="g g-Whitespace">     </span><span class="mi">72</span> <span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">74</span> <span class="c1"># Initialize farm quantities that depend on other objects</span>
<span class="ne">---&gt; </span><span class="mi">75</span> <span class="bp">self</span><span class="o">.</span><span class="n">farm</span><span class="o">.</span><span class="n">construct_turbine_map</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">76</span> <span class="bp">self</span><span class="o">.</span><span class="n">farm</span><span class="o">.</span><span class="n">construct_turbine_thrust_coefficient_functions</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">77</span> <span class="bp">self</span><span class="o">.</span><span class="n">farm</span><span class="o">.</span><span class="n">construct_turbine_axial_induction_functions</span><span class="p">()</span>

<span class="nn">File ~\projects\floris\floris\core\farm.py:262,</span> in <span class="ni">Farm.construct_turbine_map</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">261</span> <span class="k">def</span> <span class="nf">construct_turbine_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">262</span>     <span class="bp">self</span><span class="o">.</span><span class="n">turbine_map</span> <span class="o">=</span> <span class="p">[</span><span class="n">Turbine</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">turb</span><span class="p">)</span> <span class="k">for</span> <span class="n">turb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">turbine_definitions</span><span class="p">]</span>

<span class="nn">File ~\projects\floris\floris\type_dec.py:226,</span> in <span class="ni">FromDictMixin.from_dict</span><span class="nt">(cls, data)</span>
<span class="g g-Whitespace">    </span><span class="mi">221</span> <span class="k">if</span> <span class="n">undefined</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">222</span>     <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">223</span>         <span class="sa">f</span><span class="s2">&quot;The class definition for </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> &quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">224</span>         <span class="sa">f</span><span class="s2">&quot;is missing the following inputs: </span><span class="si">{</span><span class="n">undefined</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">225</span>     <span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">226</span> <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File &lt;attrs generated init floris.core.turbine.turbine.Turbine&gt;:24,</span> in <span class="ni">__init__</span><span class="nt">(self, turbine_type, rotor_diameter, hub_height, TSR, power_thrust_table, operation_model, correct_cp_ct_for_tilt, floating_tilt_table, multi_dimensional_cp_ct, power_thrust_data_file, turbine_library_path)</span>
<span class="g g-Whitespace">     </span><span class="mi">22</span>     <span class="n">__attr_validator_floating_tilt_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__attr_floating_tilt_table</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">floating_tilt_table</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">23</span>     <span class="n">__attr_validator_turbine_library_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__attr_turbine_library_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">turbine_library_path</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">24</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attrs_post_init__</span><span class="p">()</span>

<span class="nn">File ~\projects\floris\floris\core\turbine\turbine.py:461,</span> in <span class="ni">Turbine.__attrs_post_init__</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">460</span> <span class="k">def</span> <span class="nf">__attrs_post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">461</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_power_thrust_functions</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">462</span>     <span class="bp">self</span><span class="o">.</span><span class="n">__post_init__</span><span class="p">()</span>

<span class="nn">File ~\projects\floris\floris\core\turbine\turbine.py:472,</span> in <span class="ni">Turbine._initialize_power_thrust_functions</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">471</span> <span class="k">def</span> <span class="nf">_initialize_power_thrust_functions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">472</span>     <span class="n">turbine_function_model</span> <span class="o">=</span> <span class="n">TURBINE_MODEL_MAP</span><span class="p">[</span><span class="s2">&quot;operation_model&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">operation_model</span><span class="p">]</span>
<span class="g g-Whitespace">    </span><span class="mi">473</span>     <span class="bp">self</span><span class="o">.</span><span class="n">thrust_coefficient_function</span> <span class="o">=</span> <span class="n">turbine_function_model</span><span class="o">.</span><span class="n">thrust_coefficient</span>
<span class="g g-Whitespace">    </span><span class="mi">474</span>     <span class="bp">self</span><span class="o">.</span><span class="n">axial_induction_function</span> <span class="o">=</span> <span class="n">turbine_function_model</span><span class="o">.</span><span class="n">axial_induction</span>

<span class="ne">KeyError</span>: &#39;awc&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="turbine_interaction.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Turbine Library Interface</p>
      </div>
    </a>
    <a class="right-next"
       href="input_reference_main.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Main Input File Reference</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-the-operation-model">Selecting the operation model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#operation-model-library">Operation model library</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-model">Simple model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cosine-loss-model">Cosine loss model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-derating-model">Simple derating model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mixed-operation-model">Mixed operation model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#awc-model">AWC model</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By National Renewable Energy Laboratory
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>